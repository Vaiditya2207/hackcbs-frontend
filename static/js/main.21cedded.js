(()=>{"use strict";var e={7557:(e,t,o)=>{var n=o(8894),a=o(7225),l=o(3986),i=o(6665),r=o(3668),s=o(4701),d=o(1773),c=o(1087),u=o(3929),f=o(6283),g=o(6933),h=o(6725),x=o(5648),p=o(6176),m=o(397);const y=e=>{const t=(0,l.useNavigate)(),o=i.useRef(new p.default.Value(0)).current,n=i.useRef(new p.default.Value(50)).current;(0,i.useEffect)((()=>{p.default.parallel([p.default.timing(o,{toValue:1,duration:1e3,useNativeDriver:!0}),p.default.timing(n,{toValue:0,duration:1e3,useNativeDriver:!0})]).start()}),[]);const a=e=>{t(e)},s=h.default.get("window").height,d=h.default.get("window").width,c=r.default.create({container:{minHeight:s,width:"100%"},overlay:Object.assign({},r.default.absoluteFillObject),contentContainer:{flex:1,padding:20,justifyContent:"center",zIndex:1,marginTop:d<=768?100:0},header:{marginTop:20,flexDirection:d<=768?"column":"row",justifyContent:d<=768?"flex-start":"space-between",alignItems:"left",position:"absolute",top:0,left:20,right:20,zIndex:2},buttonContainer:{flexDirection:d<=768?"column":"row",alignItems:"flex-start",marginTop:d<=768?5:0,width:d<=768?"100%":"auto",marginBottom:d<=768?80:0},joinButton:{backgroundColor:"transparent",borderWidth:1,borderColor:"white",paddingHorizontal:20,paddingVertical:10,borderRadius:25,marginLeft:d<=768?0:10,marginTop:d<=768?10:0,width:d<=768?"80%":"auto"},joinText:{color:"white",fontSize:16,textAlign:"left"},logo:{color:"white",fontSize:32,fontWeight:"600",textAlign:"left",marginBottom:d<=768?5:0},title:{color:"white",fontSize:d<=768?36:48,fontWeight:"bold",marginBottom:5,maxWidth:d<=768?"100%":"80%"},subtitle:{color:"white",fontSize:18,marginTop:20,maxWidth:d<=768?"100%":"60%",lineHeight:28,marginBottom:30},waitlistButton:{flexDirection:"row",alignItems:"center",borderBottomWidth:1,borderBottomColor:"white",alignSelf:"flex-start"},waitlistText:{color:"white",fontSize:18,marginRight:10,marginBottom:5},arrow:{color:"white",fontSize:20},hover:{cursor:"pointer"},navLinks:{flexDirection:"row",justifyContent:"space-around",marginTop:100},link:{padding:10},linkText:{color:"white",fontSize:18,textDecorationLine:"underline"}});return(0,m.jsxs)(g.default,{source:{uri:"https://static.tildacdn.net/tild6337-3062-4135-a162-636635303331/Sol_Health_final_ver.jpg"},style:c.container,resizeMode:"cover",children:[(0,m.jsx)(u.default,{style:c.overlay}),(0,m.jsxs)(u.default,{style:c.header,children:[(0,m.jsx)(f.default,{style:c.logo,children:"Heal Ora"}),(0,m.jsxs)(u.default,{style:c.buttonContainer,children:[e.isLoggedIn?(0,m.jsx)(x.default,{style:c.joinButton,onPress:async()=>{const{longitude:t,latitude:o}=await new Promise(((e,t)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition((t=>{e({longitude:t.coords.longitude,latitude:t.coords.latitude})}),(t=>{console.log("Geolocation error:",t),e({longitude:null,latitude:null})})):(console.log("Geolocation not supported"),e({longitude:null,latitude:null}))}));console.log(o,t);try{const n=await fetch("https://hackcbs-backend-x9gw.onrender.com/api/hospitals/nearest",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.token}`},body:JSON.stringify({longitude:o,latitude:t})});if(!n.ok){const e=await n.text();return void console.error("Server error:",e)}const a=await n.json();console.log(a)}catch(n){console.error("Error fetching nearest hospitals:",n)}},children:(0,m.jsx)(f.default,{style:c.joinText,children:e.isLoggedIn?"Emergency Hospitals near me":""})}):null,(0,m.jsx)(x.default,{style:c.joinButton,onPress:()=>a(e.isLoggedIn?"/ai-assistant":"/sign-in"),children:(0,m.jsx)(f.default,{style:c.joinText,children:e.isLoggedIn?"Chat":"Join"})}),e.isLoggedIn?(0,m.jsx)(x.default,{style:c.joinButton,onPress:()=>a(e.isLoggedIn?"/logout":"/sign-up"),children:(0,m.jsx)(f.default,{style:c.joinText,children:e.isLoggedIn?"Log Out":"Join"})}):null]})]}),(0,m.jsx)(u.default,{style:c.contentContainer,children:(0,m.jsxs)(p.default.View,{style:{opacity:o,transform:[{translateY:n}]},children:[(0,m.jsx)(f.default,{style:c.title,children:"Redefining"}),(0,m.jsx)(f.default,{style:c.title,children:"Your Healthcare"}),(0,m.jsx)(f.default,{style:c.title,children:"Journey"}),(0,m.jsx)(f.default,{style:c.subtitle,children:"Heal Ora - your comprehensive health chat buddy that tracks your symptoms, provides probable medicines, and delivers personalized care, all powered by advanced AI to keep you healthier, longer."}),(0,m.jsxs)(x.default,{style:c.waitlistButton,onPress:()=>a("/sign-up"),children:[(0,m.jsx)(f.default,{style:c.waitlistText,children:"Join the community"}),(0,m.jsx)(f.default,{style:c.arrow,children:"\u2192"})]})]})})]})};var b=o(484);const j=()=>{const e=h.default.get("window").width,t=e<=768,o=r.default.create({container:{flexDirection:"column",padding:20,paddingTop:100,paddingBottom:20,width:"100%"},textContainer:{width:"100%",marginBottom:30},mainText:{fontSize:t?40:60,fontWeight:"semibold",color:"#000",textAlign:"center",paddingHorizontal:t?10:0},imageContainer:{flexDirection:t?"column":"row",width:"100%"},largeImage:{flex:t?0:2,height:t?.5*e:.405*e,width:t?"100%":void 0,borderRadius:15,marginRight:t?0:10,marginTop:t?5:0},smallImagesRow:{flexDirection:"row",justifyContent:"space-between",width:"100%",gap:10},smallImage:{width:t?"48.5%":"100%",height:t?.4*e:.2*e,borderRadius:15},smallImagesContainer:{flex:t?0:1,flexDirection:"column",justifyContent:"space-between"}});return t?(0,m.jsxs)(u.default,{style:o.container,children:[(0,m.jsx)(u.default,{style:o.textContainer,children:(0,m.jsx)(f.default,{style:o.mainText,children:"The future of care is personalized."})}),(0,m.jsxs)(u.default,{style:o.smallImagesRow,children:[(0,m.jsx)(b.default,{source:{uri:"https://images.unsplash.com/photo-1556760544-74068565f05c?q=80&w=2929&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},style:o.smallImage,resizeMode:"cover"}),(0,m.jsx)(b.default,{source:{uri:"https://images.unsplash.com/photo-1574482620826-40685ca5ebd2?q=80&w=2787&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},style:o.smallImage,resizeMode:"cover"})]}),(0,m.jsx)(b.default,{source:{uri:"https://static.tildacdn.net/tild6565-3930-4466-b832-636662393130/eye.jpg"},style:o.largeImage,resizeMode:"cover"})]}):(0,m.jsxs)(u.default,{style:o.container,children:[(0,m.jsx)(u.default,{style:o.textContainer,children:(0,m.jsx)(f.default,{style:o.mainText,children:"The future of care is personalized."})}),(0,m.jsxs)(u.default,{style:o.imageContainer,children:[(0,m.jsx)(b.default,{source:{uri:"https://static.tildacdn.net/tild6565-3930-4466-b832-636662393130/eye.jpg"},style:o.largeImage,resizeMode:"cover"}),(0,m.jsxs)(u.default,{style:o.smallImagesContainer,children:[(0,m.jsx)(b.default,{source:{uri:"https://images.unsplash.com/photo-1556760544-74068565f05c?q=80&w=2929&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},style:o.smallImage,resizeMode:"cover"}),(0,m.jsx)(b.default,{source:{uri:"https://images.unsplash.com/photo-1574482620826-40685ca5ebd2?q=80&w=2787&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},style:o.smallImage,resizeMode:"cover"})]})]})]})};var w=o(6773);const C=r.default.create({container:{flex:1,justifyContent:"center",alignItems:"center",marginTop:40,marginBottom:60,padding:20,backgroundColor:"#fff"},queryText:{fontFamily:"Arial",color:"black",textAlign:"center",fontWeight:"semibold"},inputBox:{width:"80%",backgroundColor:"rgba(0, 0, 0, 0.07)",borderRadius:32,paddingHorizontal:15,paddingLeft:18,fontSize:18,color:"black",marginLeft:"10%",marginRight:"10%",borderWidth:1,borderColor:"#e5e5e5"}}),T=()=>{const e=(0,l.useNavigate)(),[t,o]=(0,i.useState)(""),[n,a]=(0,i.useState)(""),[r,s]=(0,i.useState)(0),d=["How can I help you today?","What health concerns are you facing?","I feel sore today. What's the best cooldown exercise I can do?","Can you find the best dish for me in my cold?","Ask me anything about your health."];(0,i.useEffect)((()=>{const e=100*d[r].length,t=setTimeout((()=>{s((e=>(e+1)%d.length))}),e+2e3);return()=>clearTimeout(t)}),[r]),(0,i.useEffect)((()=>{let e=[];const t=d[r];return a(""),t.split("").forEach(((t,o)=>{const n=setTimeout((()=>{a((e=>e+t))}),100*o);e.push(n)})),()=>{e.forEach((e=>clearTimeout(e)))}}),[r]);const c=h.default.get("window").width,g=c<350||c<600?30:45,x=c<350?20:c<600?45:70;return(0,m.jsxs)(u.default,{style:C.container,children:[(0,m.jsx)(f.default,{style:[C.queryText,{fontSize:g,marginBottom:x/2}],children:"Ask Your Health-Bot Anything"}),(0,m.jsx)(w.default,{style:[C.inputBox,{height:x}],placeholder:n,placeholderTextColor:"grey",value:t,onChangeText:e=>{o(e)},onFocus:()=>{e("/ai-assistant")}})]})};var k=o(9632),v=o(6365);const S=()=>{const e=(0,i.useRef)(new p.default.Value(0)).current,t=(0,i.useRef)(new p.default.Value(50)).current,o=(0,i.useRef)(new p.default.Value(.95)).current,n=h.default.get("window").width;(0,i.useEffect)((()=>{p.default.parallel([p.default.timing(e,{toValue:1,duration:1e3,useNativeDriver:!0}),p.default.timing(t,{toValue:0,duration:800,useNativeDriver:!0}),p.default.spring(o,{toValue:1,friction:8,tension:40,useNativeDriver:!0})]).start()}),[]);const a=e=>{k.default.openURL(e)},l=r.default.create({container:{backgroundColor:"#ffffff",paddingHorizontal:30,paddingBottom:20,width:"100%",zIndex:1},content:{flexDirection:n<768?"column":"row",justifyContent:"space-between",alignItems:n<768?"center":"flex-start"},logo:{fontSize:n<768?80:400,fontWeight:"600",color:"#000",textAlign:"center"},tagline:{fontSize:n<768?12:20,color:"#666",fontWeight:"semibold",textAlign:"right"},contactInfo:{marginBottom:n<768?10:0,marginTop:n<768?20:0},contactText:{fontSize:n<768?16:18,textAlign:n<350?"center":"left",alignItems:n<768?"center":"left",color:"#333",marginBottom:8},address:{fontSize:n<768?16:18,color:"#333",marginTop:16,paddingBottom:10,textAlign:"left"},links:{alignItems:"left",marginTop:n<768?20:0},link:{color:"#000",textDecorationLine:"underline",marginBottom:12},linkText:{fontSize:n<768?16:18},copyright:{fontSize:14,color:"#666",textAlign:"center",marginTop:20},development:{position:"absolute",bottom:20,right:20,fontSize:14,color:"#666"}});return(0,m.jsxs)(p.default.View,{style:[l.container,{opacity:e,transform:[{translateY:t}]}],children:[(0,m.jsxs)(u.default,{style:l.content,children:[(0,m.jsx)(p.default.View,{style:[l.links,{transform:[{translateY:t}],opacity:e}],children:(0,m.jsx)(f.default,{style:l.linkText,children:"\xa92024 Sol Health"})}),(0,m.jsxs)(p.default.View,{style:[l.contactInfo,{transform:[{translateY:t}],opacity:e}],children:[(0,m.jsx)(x.default,{onPress:()=>a("tel:+919256225327"),children:(0,m.jsx)(f.default,{style:l.contactText,children:"+91 92562 25327"})}),(0,m.jsx)(x.default,{onPress:()=>a("mailto:vaiditya.t23csai@nst.rishihood.edu.in"),children:(0,m.jsx)(f.default,{style:l.contactText,children:"Vaiditya Tanwar"})}),(0,m.jsxs)(f.default,{style:l.address,children:["NH44, Chowk, Bahalgarh","\n","Rishihood University"]})]}),(0,m.jsxs)(p.default.View,{style:[l.links,{transform:[{translateY:t}],opacity:e}],children:[(0,m.jsx)(v.Link,{to:"/privacy",component:x.default,style:l.link,children:(0,m.jsx)(f.default,{style:l.linkText,children:"Privacy Policy"})}),(0,m.jsx)(v.Link,{to:"/terms",component:x.default,style:l.link,children:(0,m.jsx)(f.default,{style:l.linkText,children:"Terms & Conditions"})}),(0,m.jsx)(v.Link,{to:"/cookies",component:x.default,style:l.link,children:(0,m.jsx)(f.default,{style:l.linkText,children:"Cookie Policy"})})]})]}),(0,m.jsxs)(p.default.View,{style:[l.logoContainer,{transform:[{scale:o}]}],children:[(0,m.jsx)(f.default,{style:l.logo,children:"Heal Ora"}),(0,m.jsx)(f.default,{style:l.tagline,children:"Welcome to the future of personalized care."})]})]})};var I=o(4307),B=o(530),z=o(1690),E=o(4821);const A=r.default.create({safeArea:{flex:1,backgroundColor:"#f0f0f0"},container:{flex:1,justifyContent:"space-between"},card:Object.assign({flex:1,backgroundColor:"white",margin:16,borderRadius:20},{boxShadow:"0px 2px 3.84px rgba(0, 0, 0, 0.25)"},{padding:16,position:"relative"}),header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:20},titleContainer:{flexDirection:"row",alignItems:"center"},sparkle:{fontSize:18,marginRight:8,color:"#22c55e"},title:{fontSize:18,fontWeight:"600"},closeButton:{fontSize:24,color:"#666"},content:{flex:1,alignItems:"center",paddingBottom:80},orbContainer:{marginVertical:20},orb:{width:80,height:80,borderRadius:40,opacity:.9,shadowColor:"#22c55e",shadowOffset:{width:0,height:0},shadowOpacity:.5,shadowRadius:20},questionText:{fontSize:22,color:"#000",textAlign:"center",marginBottom:40},buttonsContainer:{width:"100%",alignItems:"flex-end",gap:10},questionButton:{backgroundColor:"#E6E6E6",paddingVertical:10,paddingHorizontal:15,borderRadius:20,maxWidth:"80%",shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.2,shadowRadius:1.41,elevation:2,marginBottom:10},questionButtonText:{textAlign:"center",color:"#000",fontSize:14},showMoreButton:{marginTop:5},showMoreText:{color:"#666",fontSize:16},messagesContainer:{flex:1,width:"100%",paddingHorizontal:16},messagesContainerActive:{flex:1,width:"100%",paddingHorizontal:16,marginTop:20},messageBox:{maxWidth:"80%",padding:12,borderRadius:16,marginVertical:4},userMessage:{alignSelf:"flex-end",backgroundColor:"#22c55e",marginLeft:"20%"},botMessage:{alignSelf:"flex-start",backgroundColor:"#f0f0f0",marginRight:"20%"},emergencyMessage:{backgroundColor:"#ff4444",marginRight:"20%"},messageText:{fontSize:14,lineHeight:20},userMessageText:{color:"#ffffff"},botMessageText:{color:"#333333"},emergencyMessageText:{color:"#ffffff",fontWeight:"bold"},sendButtonDisabled:{backgroundColor:"#ccc"},inputContainer:{position:"absolute",bottom:0,left:0,right:0,backgroundColor:"white",padding:16,borderTopWidth:1,borderTopColor:"#e5e5e5"},inputWrapper:{flexDirection:"row",alignItems:"center",backgroundColor:"#f5f5f5",borderRadius:25,paddingHorizontal:15,marginBottom:0},input:{flex:1,paddingVertical:12,fontSize:16,color:"#333"},sendButton:{marginLeft:10,padding:8,backgroundColor:"#22c55e",borderRadius:20,width:40,height:40,justifyContent:"center",alignItems:"center"},navLinks:{flexDirection:"row",justifyContent:"space-around",marginTop:20},link:{padding:10},linkText:{color:"#22c55e",fontSize:16,textDecorationLine:"underline"}}),M=({isLoggedIn:e,token:t})=>{const n=(0,l.useNavigate)(),[a,r]=(0,i.useState)(""),[d,c]=(0,i.useState)(null),[g,h]=(0,i.useState)([]),[p,y]=(0,i.useState)(!1),j=(0,i.useRef)(),[C,T]=(0,i.useState)(!0);(0,i.useEffect)((()=>{console.log("AiAssistant Props:",{isLoggedIn:e,token:t})}),[e,t]),(0,i.useEffect)((()=>{if(console.log("Checking auth state:",{isLoggedIn:e,token:t}),!e)return console.log("User not logged in, redirecting to /sign-up"),void n("/sign-up");console.log("Calling createChatSession..."),(async()=>{console.log("Attempting to create chat session with token:",t);try{const e=await fetch("https://hackcbs-backend-x9gw.onrender.com/api/chat",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({subject:"Health Check"})});if(console.log("API Response status:",e.status),!e.ok){const t=await e.text();throw console.error("Failed response:",t),new Error(`Failed to create chat session: ${e.status}`)}const o=await e.json();console.log("Chat session created successfully:",o),c(o.chat_id)}catch(e){console.error("Error in createChatSession:",e),z.default.alert("Error","Failed to create chat session")}})()}),[e,t,n]);const k=()=>new Promise(((e,t)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition((t=>{e({longitude:t.coords.longitude,latitude:t.coords.latitude})}),(t=>{console.log("Geolocation error:",t),e({longitude:null,latitude:null})})):(console.log("Geolocation not supported"),e({longitude:null,latitude:null}))}));return(0,m.jsx)(s.default,{style:A.safeArea,children:(0,m.jsx)(u.default,{style:A.container,children:(0,m.jsxs)(u.default,{style:A.card,children:[(0,m.jsxs)(u.default,{style:A.header,children:[(0,m.jsxs)(u.default,{style:A.titleContainer,children:[(0,m.jsx)(f.default,{style:A.sparkle,children:"\u2728"}),(0,m.jsx)(f.default,{style:A.title,children:"Heal Ora"})]}),(0,m.jsx)(x.default,{onPress:()=>{n("/")},children:(0,m.jsx)(f.default,{style:A.closeButton,children:"x"})})]}),(0,m.jsx)(u.default,{style:A.content,children:C?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(u.default,{style:A.orbContainer,children:(0,m.jsx)(b.default,{source:o(6618),style:A.orb})}),(0,m.jsx)(f.default,{style:A.questionText,children:"What health query do you have?"}),(0,m.jsx)(u.default,{style:A.buttonsContainer,children:["Generate Summary","Are they a good fit for my job post?","What is their training style?"].map(((e,o)=>(0,m.jsx)(x.default,{style:A.questionButton,onPress:()=>(async e=>{r(e),T(!1);try{h((t=>[...t,{text:e,isUser:!0}])),console.log("Sending suggestion:",{chatId:d,question:e});const o=await fetch(`https://hackcbs-backend-x9gw.onrender.com/api/ai?id=${d}`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({data:{role:"user",msg:e,long:null,lat:null}})});if(console.log("AI API response status:",o.status),!o.ok){const e=await o.text();throw console.error("Failed AI response:",e),new Error("Failed to get AI response")}const n=await o.json();if(console.log("AI response received:",n),n.message&&n.message.includes("Emergency")){console.log("Emergency response detected");const e=`\ud83d\udea8 EMERGENCY: ${n.message}\n\nNearest Hospital:\n${n.nearestHospital.hospital_name}\n${void 0==n.nearestHospital.location?"Cant Get the Correct Location":`${n.nearestHospital.location}`}\n(${n.nearestHospital.distance} KMS away)\nQuick Help: ${n.details}`;h((t=>[...t,{text:e,isUser:!1,isEmergency:!0}]))}else h((e=>[...e,{text:n.aiResponse||n.message,isUser:!1}]));r("")}catch(o){console.error("Error sending suggestion:",o)}})(e),children:(0,m.jsx)(f.default,{style:A.questionButtonText,children:e})},o)))})]}):(0,m.jsx)(I.default,{style:A.messagesContainerActive,ref:j,onContentSizeChange:()=>j.current?.scrollToEnd({animated:!0}),children:g.map(((e,t)=>(0,m.jsx)(u.default,{style:[A.messageBox,e.isUser?A.userMessage:A.botMessage,e.isEmergency&&A.emergencyMessage],children:(0,m.jsx)(f.default,{style:[A.messageText,e.isUser?A.userMessageText:A.botMessageText,e.isEmergency&&A.emergencyMessageText],children:e.text})},t)))})}),(0,m.jsx)(u.default,{style:A.inputContainer,children:(0,m.jsxs)(u.default,{style:A.inputWrapper,children:[(0,m.jsx)(w.default,{style:A.input,placeholder:"Ask me anything...",placeholderTextColor:"#666",value:a,onChangeText:r}),(0,m.jsx)(x.default,{style:[A.sendButton,p&&A.sendButtonDisabled],onPress:async()=>{if(!a.trim()||!d)return void console.log("Cannot send: empty input or no chatId",{inputText:a,chatId:d});T(!1),y(!0),console.log("Sending message:",{chatId:d,inputText:a});const{longitude:e,latitude:o}=await k();try{h((e=>[...e,{text:a,isUser:!0}])),console.log("Making API request to /api/ai");const n=await fetch(`https://hackcbs-backend-x9gw.onrender.com/api/ai?id=${d}`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json",long:e,lat:o},body:JSON.stringify({data:{role:"user",msg:a}})});if(console.log("AI API response status:",n.status),!n.ok){const e=await n.text();throw console.error("Failed AI response:",e),new Error("Failed to get AI response")}const l=await n.json();if(console.log("AI response received:",l),l.message&&l.message.includes("Emergency")){console.log("Emergency response detected");const e=`\ud83d\udea8 EMERGENCY: ${l.message}\n\nNearest Hospital:\n${l.nearestHospital.hospital_name}\n${l.nearestHospital.location.address}\n(${l.nearestHospital.distance} away)`;h((t=>[...t,{text:e,isUser:!1,isEmergency:!0}]))}else h((e=>[...e,{text:l.aiResponse||l.message,isUser:!1}]));r("")}catch(n){console.error("Error in AI communication:",n),z.default.alert("Error","Failed to get AI response")}finally{y(!1)}},disabled:p,children:p?(0,m.jsx)(B.default,{color:"white",size:"small"}):(0,m.jsx)(E.default,{name:"paper-plane",size:20,color:"white"})})]})})]})})})},H=r.default.create({container:{flex:1,backgroundColor:"#fff"},header:{alignItems:"flex-start",padding:20,paddingBottom:0},profileImage:{width:160,height:160,borderRadius:80,borderWidth:3,borderColor:"#fff"},formContainer:{padding:20,borderWidth:1,borderColor:"#ddd",borderRadius:12,backgroundColor:"#fff",margin:20},sectionTitle:{fontSize:24,textAlign:"left",fontWeight:"bold",marginBottom:20},row:{flexDirection:"row",justifyContent:"space-between",marginBottom:15},column:{flex:1,marginHorizontal:5},label:{fontSize:16,marginBottom:8,color:"#000",fontWeight:"semibold"},input:{borderWidth:1,borderColor:"#ddd",borderRadius:8,padding:12,fontSize:16,backgroundColor:"#fff",marginBottom:15},saveButton:{backgroundColor:"#0b6781",padding:15,borderRadius:25,alignItems:"center",marginTop:20},saveButtonText:{color:"#fff",fontSize:16,fontWeight:"bold"}}),O=()=>{const[e,t]=(0,i.useState)({firstName:"Vaiditya",lastName:"Tanwar",email:"vaiditya2207@gmail.com",phoneNumber:" 92562 25327",height:'5"11',weight:"85"});(0,l.useNavigate)();return(0,m.jsxs)(I.default,{style:H.container,children:[(0,m.jsx)(u.default,{style:H.header,children:(0,m.jsx)(b.default,{source:{uri:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?q=80&w=2787&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},style:H.profileImage})}),(0,m.jsxs)(u.default,{style:H.formContainer,children:[(0,m.jsx)(f.default,{style:H.sectionTitle,children:"Details"}),(0,m.jsxs)(u.default,{style:H.row,children:[(0,m.jsxs)(u.default,{style:H.column,children:[(0,m.jsx)(f.default,{style:H.label,children:"First Name"}),(0,m.jsx)(w.default,{style:H.input,value:e.firstName,onChangeText:o=>t(Object.assign({},e,{firstName:o})),placeholder:"First Name"})]}),(0,m.jsxs)(u.default,{style:H.column,children:[(0,m.jsx)(f.default,{style:H.label,children:"Last Name"}),(0,m.jsx)(w.default,{style:H.input,value:e.lastName,onChangeText:o=>t(Object.assign({},e,{lastName:o})),placeholder:"Last Name"})]})]}),(0,m.jsxs)(u.default,{style:H.row,children:[(0,m.jsxs)(u.default,{style:H.column,children:[(0,m.jsx)(f.default,{style:H.label,children:"Your Contact Number"}),(0,m.jsx)(w.default,{style:H.input,value:e.phoneNumber,onChangeText:o=>t(Object.assign({},e,{phoneNumber:o})),placeholder:"Phone Number",keyboardType:"phone-pad"})]}),(0,m.jsxs)(u.default,{style:H.column,children:[(0,m.jsx)(f.default,{style:H.label,children:"Your Emergency Contact"}),(0,m.jsx)(w.default,{style:H.input,value:"8317034424",placeholder:"Phone Number",keyboardType:"phone-pad"})]})]}),(0,m.jsxs)(u.default,{style:H.row,children:[(0,m.jsxs)(u.default,{style:H.column,children:[(0,m.jsx)(f.default,{style:H.label,children:"Your Height"}),(0,m.jsx)(w.default,{style:H.input,value:e.height,onChangeText:o=>t(Object.assign({},e,{height:o})),placeholder:"Your height"})]}),(0,m.jsxs)(u.default,{style:H.column,children:[(0,m.jsx)(f.default,{style:H.label,children:"Your Weight"}),(0,m.jsx)(w.default,{style:H.input,value:e.weight,onChangeText:o=>t(Object.assign({},e,{weight:o})),placeholder:"Your weight"})]})]}),(0,m.jsx)(f.default,{style:H.label,children:"Email"}),(0,m.jsx)(w.default,{style:H.input,value:e.email,onChangeText:o=>t(Object.assign({},e,{email:o})),placeholder:"Enter your email",keyboardType:"email-address"}),(0,m.jsx)(x.default,{style:H.saveButton,onPress:()=>{console.log("Saving changes:",e)},children:(0,m.jsx)(f.default,{style:H.saveButtonText,children:"Save Changes"})})]})]})};var D=o(4767);const{width:R,height:P}=h.default.get("window"),W=r.default.create({container:{flex:1},backgroundImage:{flex:1,width:"100%"},keyboardView:{flex:1},scrollContent:{flexGrow:1,justifyContent:"center",minHeight:P},contentContainer:{flex:1,justifyContent:"center",padding:.05*R,paddingTop:5,backgroundColor:"rgba(0,0,0,0.3)"},headerContainer:{marginBottom:.03*P,alignItems:"left"},title:{fontSize:Math.min(.07*R,80),fontWeight:"600",color:"white",textAlign:"left"},formContainer:{width:"100%",maxWidth:Math.min(400,.9*R),alignSelf:"center"},inputContainer:{marginBottom:.02*P},label:{color:"white",fontSize:Math.min(.035*R,16),marginBottom:.01*P,fontWeight:"500"},input:{borderBottomWidth:1,borderBottomColor:"white",color:"white",fontSize:Math.min(.035*R,16),paddingVertical:.01*P,paddingHorizontal:.02*R,borderRadius:20,minHeight:Math.max(.05*P,40)},signUpButton:{backgroundColor:"#197996",paddingVertical:Math.max(.02*P,12),borderRadius:25,marginTop:.02*P,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.25,shadowRadius:3.84,elevation:5},signUpText:{color:"white",fontSize:Math.min(.035*R,16),textAlign:"center",fontWeight:"600"},loginLink:{marginTop:.02*P,alignItems:"center"},loginLinkText:{color:"white",fontSize:Math.min(.035*R,14),textDecorationLine:"underline"}}),L=()=>{const[e,t]=(0,i.useState)(""),[o,n]=(0,i.useState)(""),[r,d]=(0,i.useState)(""),[c,h]=(0,i.useState)(""),[p,y]=(0,i.useState)(""),[b,j]=(0,i.useState)(""),[C,T]=(0,i.useState)(""),k=(0,l.useNavigate)();return(0,m.jsxs)(s.default,{style:W.container,children:[(0,m.jsx)(a.StatusBar,{style:"light"}),(0,m.jsx)(g.default,{source:{uri:"https://images.unsplash.com/photo-1608963600486-c2df3ba0597e?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},style:W.backgroundImage,resizeMode:"cover",children:(0,m.jsx)(D.default,{behavior:"height",style:W.keyboardView,children:(0,m.jsx)(I.default,{contentContainerStyle:W.scrollContent,showsVerticalScrollIndicator:!1,children:(0,m.jsxs)(u.default,{style:W.contentContainer,children:[(0,m.jsx)(u.default,{style:W.headerContainer,children:(0,m.jsx)(f.default,{style:W.title,children:"Welcome to Heal Ora"})}),(0,m.jsxs)(u.default,{style:W.formContainer,children:[(0,m.jsxs)(u.default,{style:W.inputContainer,children:[(0,m.jsx)(f.default,{style:W.label,children:"FIRST NAME"}),(0,m.jsx)(w.default,{style:W.input,value:e,onChangeText:t,placeholder:"Enter your first name",placeholderTextColor:"rgba(255,255,255,0.5)"})]}),(0,m.jsxs)(u.default,{style:W.inputContainer,children:[(0,m.jsx)(f.default,{style:W.label,children:"LAST NAME"}),(0,m.jsx)(w.default,{style:W.input,value:o,onChangeText:n,placeholder:"Enter your last name",placeholderTextColor:"rgba(255,255,255,0.5)"})]}),(0,m.jsxs)(u.default,{style:W.inputContainer,children:[(0,m.jsx)(f.default,{style:W.label,children:"EMAIL"}),(0,m.jsx)(w.default,{style:W.input,value:r,onChangeText:d,keyboardType:"email-address",autoCapitalize:"none",placeholder:"Enter your email",placeholderTextColor:"rgba(255,255,255,0.5)"})]}),(0,m.jsxs)(u.default,{style:W.inputContainer,children:[(0,m.jsx)(f.default,{style:W.label,children:"PASSWORD"}),(0,m.jsx)(w.default,{style:W.input,value:c,onChangeText:h,secureTextEntry:!0,placeholder:"Enter your password",placeholderTextColor:"rgba(255,255,255,0.5)"})]}),(0,m.jsxs)(u.default,{style:W.inputContainer,children:[(0,m.jsx)(f.default,{style:W.label,children:"PHONE NUMBER"}),(0,m.jsx)(w.default,{style:W.input,value:p,onChangeText:y,placeholder:"Enter your phone number",placeholderTextColor:"rgba(255,255,255,0.5)",keyboardType:"phone-pad"})]}),(0,m.jsxs)(u.default,{style:W.inputContainer,children:[(0,m.jsx)(f.default,{style:W.label,children:"HEIGHT"}),(0,m.jsx)(w.default,{style:W.input,value:b,onChangeText:j,placeholder:"Enter your height in cm",placeholderTextColor:"rgba(255,255,255,0.5)",keyboardType:"numeric"})]}),(0,m.jsxs)(u.default,{style:W.inputContainer,children:[(0,m.jsx)(f.default,{style:W.label,children:"WEIGHT"}),(0,m.jsx)(w.default,{style:W.input,value:C,onChangeText:T,placeholder:"Enter your weight in kg",placeholderTextColor:"rgba(255,255,255,0.5)",keyboardType:"numeric"})]}),(0,m.jsx)(x.default,{style:W.signUpButton,onPress:async()=>{if(e&&o&&r&&c&&p&&b&&C?r.includes("@")?!(c.length<6)||(z.default.alert("Error","Password must be at least 6 characters long"),0):(z.default.alert("Error","Please enter a valid email address"),0):(z.default.alert("Error","Please fill in all fields"),0))try{const t=await fetch("https://hackcbs-backend-x9gw.onrender.com/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone_number:p,first_name:e,last_name:o,weight:parseFloat(C),height:parseFloat(b),email:r,password:c})}),n=await t.json();t.ok?z.default.alert("Success","Account created successfully!",[{text:"OK",onPress:()=>k("/signin")}]):z.default.alert("Error",n.message||"Failed to sign up")}catch(t){console.error("Sign up error:",t),z.default.alert("Error","An error occurred during sign up")}},activeOpacity:.8,children:(0,m.jsx)(f.default,{style:W.signUpText,children:"SIGN UP"})}),(0,m.jsx)(x.default,{style:W.loginLink,onPress:()=>k("/sign-in"),children:(0,m.jsx)(f.default,{style:W.loginLinkText,children:"Already have an account? Sign In"})})]})]})})})})]})},{width:N,height:V}=h.default.get("window"),G=r.default.create({container:{flex:1},backgroundImage:{flex:1,width:"100%"},keyboardView:{flex:1},scrollContent:{flexGrow:1,justifyContent:"center",minHeight:V},contentContainer:{flex:1,justifyContent:"center",padding:.05*N,paddingTop:5,backgroundColor:"rgba(0,0,0,0.3)"},headerContainer:{marginBottom:.03*V,alignItems:"left"},title:{fontSize:Math.min(.07*N,80),fontWeight:"600",color:"white",textAlign:"left"},formContainer:{width:"100%",maxWidth:Math.min(400,.9*N),alignSelf:"center"},inputContainer:{marginBottom:.02*V},label:{color:"white",fontSize:Math.min(.035*N,16),marginBottom:.01*V,fontWeight:"500"},input:{borderBottomWidth:1,borderBottomColor:"white",color:"white",fontSize:Math.min(.035*N,16),paddingVertical:.01*V,paddingHorizontal:.02*N,borderRadius:20,minHeight:Math.max(.05*V,40)},signUpButton:{backgroundColor:"#197996",paddingVertical:Math.max(.02*V,12),borderRadius:25,marginTop:.02*V,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.25,shadowRadius:3.84,elevation:5},signUpText:{color:"white",fontSize:Math.min(.035*N,16),textAlign:"center",fontWeight:"600"},loginLink:{marginTop:.02*V,alignItems:"center"},loginLinkText:{color:"white",fontSize:Math.min(.035*N,14),textDecorationLine:"underline"}}),U=({setIsLoggedIn:e,setToken:t})=>{const[o,n]=(0,i.useState)(""),[r,d]=(0,i.useState)(""),[h,p]=(0,i.useState)(!1),y=(0,l.useNavigate)(),b=(0,i.useCallback)((()=>{if(!o.trim()||!r.trim())return z.default.alert("Error","Please fill in all fields"),!1;return!!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)||(z.default.alert("Error","Please enter a valid email address"),!1)}),[o,r]),j=(0,i.useCallback)((()=>{y("/sign-up")}),[y]),C=(0,i.useCallback)((()=>{y("/")}),[y]),T=(0,i.useCallback)((async()=>{if(!h&&b()){p(!0);try{const n=await fetch("https://hackcbs-backend-x9gw.onrender.com/auth/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o.trim(),password:r})}),a=await n.json();if(n.ok&&a.token)await c.default.setItem("token",a.token),e(!0),t(a.token),C();else{const e=a.message||"Invalid email or password";z.default.alert("Sign In Failed",e)}}catch(n){console.error("Sign in error:",n),z.default.alert("Connection Error","Unable to connect to the server. Please check your internet connection and try again.")}finally{p(!1)}}}),[h,b,o,r,e,t,C]);return(0,m.jsxs)(s.default,{style:G.container,children:[(0,m.jsx)(a.StatusBar,{style:"light"}),(0,m.jsx)(g.default,{source:{uri:"https://images.unsplash.com/photo-1608963600486-c2df3ba0597e?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},style:G.backgroundImage,resizeMode:"cover",children:(0,m.jsx)(D.default,{behavior:"height",style:G.keyboardView,children:(0,m.jsx)(I.default,{contentContainerStyle:G.scrollContent,showsVerticalScrollIndicator:!1,children:(0,m.jsxs)(u.default,{style:G.contentContainer,children:[(0,m.jsx)(u.default,{style:G.headerContainer,children:(0,m.jsx)(f.default,{style:G.title,children:"Welcome back to Heal Ora"})}),(0,m.jsxs)(u.default,{style:G.formContainer,children:[(0,m.jsxs)(u.default,{style:G.inputContainer,children:[(0,m.jsx)(f.default,{style:G.label,children:"EMAIL"}),(0,m.jsx)(w.default,{style:G.input,value:o,onChangeText:n,keyboardType:"email-address",autoCapitalize:"none",placeholder:"Enter your email",placeholderTextColor:"rgba(255,255,255,0.5)",editable:!h})]}),(0,m.jsxs)(u.default,{style:G.inputContainer,children:[(0,m.jsx)(f.default,{style:G.label,children:"PASSWORD"}),(0,m.jsx)(w.default,{style:G.input,value:r,onChangeText:d,secureTextEntry:!0,placeholder:"Enter your password",placeholderTextColor:"rgba(255,255,255,0.5)",editable:!h})]}),(0,m.jsx)(x.default,{style:[G.signUpButton,h&&G.disabledButton],onPress:T,activeOpacity:.8,disabled:h,children:(0,m.jsx)(f.default,{style:G.signUpText,children:h?"Signing in...":"SIGN IN"})}),(0,m.jsx)(x.default,{style:G.loginLink,onPress:j,disabled:h,children:(0,m.jsx)(f.default,{style:G.loginLinkText,children:"Don't have an account? Sign Up"})})]})]})})})})]})},Y=r.default.create({container:{flex:1,backgroundColor:"#fff"},content:{flex:1}}),F=({children:e})=>(0,m.jsx)(I.default,{style:Y.container,children:(0,m.jsx)(u.default,{style:Y.content,children:e})}),_=({setIsLoggedIn:e,setToken:t})=>{const o=(0,l.useNavigate)();return(0,i.useEffect)((()=>{(async()=>{try{await c.default.removeItem("token"),e(!1),t(null),o("/sign-in")}catch(n){console.error("Error during logout:",n)}})()}),[]),(0,m.jsx)(u.default,{style:{flex:1,justifyContent:"center",alignItems:"center"},children:(0,m.jsx)(B.default,{size:"large"})})};const q=r.default.create({container:{flex:1}});(0,n.default)((function(){const[e,t]=(0,i.useState)(!1),[o,n]=(0,i.useState)(null);return(0,i.useEffect)((()=>{const e=d.default.addEventListener("hardwareBackPress",(()=>!0));return()=>e.remove()}),[]),(0,i.useEffect)((()=>{(async()=>{try{const e=await c.default.getItem("token");console.log("Checking stored token:",e),e?(console.log("Found stored token, setting logged in state"),t(!0),n(e)):console.log("No token found in storage")}catch(e){console.error("Error checking token:",e)}})()}),[]),console.log("App render state:",{isLoggedIn:e,token:o}),(0,m.jsx)(s.default,{style:q.container,children:(0,m.jsxs)(v.NativeRouter,{children:[(0,m.jsx)(a.StatusBar,{style:"auto"}),(0,m.jsxs)(l.Routes,{children:[(0,m.jsx)(l.Route,{path:"/logout",element:(0,m.jsx)(_,{setIsLoggedIn:t,setToken:n})}),(0,m.jsx)(l.Route,{path:"/ai-assistant",element:(0,m.jsx)(M,{isLoggedIn:e,token:o})}),(0,m.jsx)(l.Route,{path:"/sign-up",element:(0,m.jsx)(L,{setIsLoggedIn:t,setToken:n})}),(0,m.jsx)(l.Route,{path:"/sign-in",element:(0,m.jsx)(U,{setIsLoggedIn:t,setToken:n})}),(0,m.jsx)(l.Route,{path:"/my-profile",element:(0,m.jsx)(O,{setIsLoggedIn:t,setToken:n})}),(0,m.jsx)(l.Route,{path:"/",element:(0,m.jsxs)(F,{children:[(0,m.jsx)(y,{isLoggedIn:e,token:o}),(0,m.jsx)(j,{}),(0,m.jsx)(T,{}),(0,m.jsx)(S,{})]})})]})]})})}))},6618:(e,t,o)=>{e.exports=o.p+"static/media/marble.0f6cafc4381c9db90551.png"}},t={};function o(n){var a=t[n];if(void 0!==a)return a.exports;var l=t[n]={exports:{}};return e[n].call(l.exports,l,l.exports,o),l.exports}o.m=e,(()=>{var e=[];o.O=(t,n,a,l)=>{if(!n){var i=1/0;for(c=0;c<e.length;c++){for(var[n,a,l]=e[c],r=!0,s=0;s<n.length;s++)(!1&l||i>=l)&&Object.keys(o.O).every((e=>o.O[e](n[s])))?n.splice(s--,1):(r=!1,l<i&&(i=l));if(r){e.splice(c--,1);var d=a();void 0!==d&&(t=d)}}return t}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[n,a,l]}})(),o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;o.t=function(n,a){if(1&a&&(n=this(n)),8&a)return n;if("object"===typeof n&&n){if(4&a&&n.__esModule)return n;if(16&a&&"function"===typeof n.then)return n}var l=Object.create(null);o.r(l);var i={};e=e||[null,t({}),t([]),t(t)];for(var r=2&a&&n;"object"==typeof r&&!~e.indexOf(r);r=t(r))Object.getOwnPropertyNames(r).forEach((e=>i[e]=()=>n[e]));return i.default=()=>n,o.d(l,i),l}})(),o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.p="/",(()=>{var e={792:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var a,l,[i,r,s]=n,d=0;if(i.some((t=>0!==e[t]))){for(a in r)o.o(r,a)&&(o.m[a]=r[a]);if(s)var c=s(o)}for(t&&t(n);d<i.length;d++)l=i[d],o.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return o.O(c)},n=self.webpackChunkweb=self.webpackChunkweb||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var n=o.O(void 0,[590],(()=>o(7557)));n=o.O(n)})();
//# sourceMappingURL=main.21cedded.js.map